class ElementFactory{static createHeader(){const e=document.createElement("header");return e.appendChild(this.createNavbar()),e}static createNavbar(){const e=document.createElement("nav");e.classList="navbar",e.ariaRoleDescription="Navigation bar";const t=document.createElement("h2");return t.innerText="Gposes",e.appendChild(t),e}static createRepository(){const e=document.createElement("div");return e.classList="repository",e}static createSourceFolder(e="",t=""){const s=document.createElement("div");s.dataset.title=e.split("/")[0].replace(" ",""),s.id=`source_${e.split("/")[0]}`,s.className="card";const a=document.createElement("div");a.classList="img-div",s.append(a);const c=document.createElement("img");return c.src=t,"../assets/img/folder.png"===t&&(c.classList="folder"),a.appendChild(c),c.onload=function(){c.naturalHeight<250&&(c.classList="fullheight",a.style.display="flex",a.style.justifyContent="center")},s}}class Utilities{static isNsfw=!1;static setIsNsfw(){const e=new URLSearchParams(window.location.search);this.isNsfw=this.isWelcomePage()&&"true"===e.get("isNsfw")}static isWelcomePage(){return"Welcome | Gposes Xplorer"===document.title}}class FetchFactory{static async fetchSources(e){return Utilities.setIsNsfw(),await fetch(`${e}api/sources.php?isNsfw=${Utilities.isNsfw}`).then(e=>e.json()).then(e=>{if(Object.entries(e).length>0)return Object.entries(e);throw new Exception("No folder available !")}).catch(e=>console.error("Failed to fetch sources :",e.message))}}const host="https://naslku.synology.me/gposesXplorerAPI/";document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(ElementFactory.createHeader()),FetchFactory.fetchSources(host).then(e=>{if(e.length>0){const t=ElementFactory.createRepository();document.body.appendChild(t),Array.from(e).forEach(e=>{let s="../assets/img/folder.png"!==e[1]?e[1].replace("../",host):"../assets/img/folder.png";t.appendChild(ElementFactory.createSourceFolder(e[0],s))})}})});